<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content=" ">
    <meta property="og:description" content=" ">
    <meta property="og:image" content="https://lh3.googleusercontent.com/u/0/d/1K0BRvOY_r6-6YXI6VUbKDSMPivc9AE_E">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:image" content="https://lh3.googleusercontent.com/u/0/d/1K0BRvOY_r6-6YXI6VUbKDSMPivc9AE_E">
    
    <title>‚ù§Ô∏è‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏•‡∏∏‡πâ‡∏ô‡πÇ‡∏ä‡∏Ñ‚ù§Ô∏è</title> 
</head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
  @keyframes glow-pulse {
  0% { transform: scale(1); box-shadow: 0 0 5px rgba(255, 10, 84, 0.4); opacity: 1; }
  50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(255, 10, 84, 0.8); opacity: 0.9; }
  100% { transform: scale(1); box-shadow: 0 0 5px rgba(255, 10, 84, 0.4); opacity: 1; }
}

/* ‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• (‡∏ù‡∏±‡πà‡∏á‡∏Ç‡∏ß‡∏≤) */
#prizeListBtn {
    animation: glow-pulse 1.5s infinite ease-in-out !important;
}

/* ‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ (‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô) */
#drawBtn:not(:disabled) {
    animation: glow-pulse 1.5s infinite ease-in-out !important;
    border: 2px solid #fff; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏≤‡∏ß‡∏ö‡∏≤‡∏á‡πÜ ‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏î‡πà‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÅ‡∏™‡∏á */
}
* { box-sizing: border-box; }
  
  #termsBtn {
    animation: glow-pulse 1.5s infinite ease-in-out !important;
}

html, body { 
    height: 100%; 
    width: 100%; 
    overflow: hidden; 
    position: fixed; 
    margin: 0; 
    padding: 0; 
}

.bg-container { 
    position: fixed; 
    top: 0; 
    left: 0; 
    width: 100%; 
    height: 100%; 
    background-image: url('https://lh3.googleusercontent.com/d/1K0BRvOY_r6-6YXI6VUbKDSMPivc9AE_E'); 
    background-size: cover;        
    background-position: center;  
    background-repeat: no-repeat; 
    z-index: -1; 
}

@media (max-width: 768px) {
    #saveBtn {
        display: none !important;
    }
    .bg-container { 
        background-image: url('https://lh3.googleusercontent.com/d/1ERUqVLPAj1DBJl_AhkY-1TCClSK1rTnq'); 
    }
}

.bg-overlay { 
    position: fixed; 
    inset: 0; 
    background: rgba(0,0,0,0.1); 
    z-index: -1; 
}
  body { font-family: 'Sarabun', sans-serif; color: white; display: flex; flex-direction: column; align-items: center; justify-content: space-between; } h1 { text-align:center; margin: 4vh 0 0 0; font-size: clamp(18px, 5vw, 24px); text-shadow: 2px 2px 4px rgba(0,0,0,0.5); z-index: 5; } #regForm { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 1000; } .reg-box { background: white; padding: 30px; border-radius: 20px; width: 90%; max-width: 320px; color: #333; } .reg-box h2 { color: #ff4d6d; margin-top: 0; text-align: center; } .reg-box input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 10px; font-size: 16px; } .reg-box button { width: 100%; padding: 12px; background: #ff4d6d; color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; } #scene { position: relative; width: 100%; max-width: 360px; height: 55vh; display: flex; align-items: center; justify-content: center; } #shakeGroup { position: relative; width: 180px; height: 400px; transform-origin: bottom center; transition: transform 0.1s; } .shake { animation: shakeTube 0.5s infinite ease-in-out; } @keyframes shakeTube { 0%, 100% { transform: rotate(0deg); } 25% { transform: rotate(6deg); } 75% { transform: rotate(-6deg); } } .shake .stick { animation: stickDance 0.3s infinite alternate ease-in-out; } @keyframes stickDance { 0% { transform: rotate(var(--r)) translateY(0); } 100% { transform: rotate(calc(var(--r) * -1.2)) translateY(-20px); } } #tubeWrap { position: absolute; bottom: 0; width: 100%; height: 300px; z-index: 30; } #tube { position: absolute; bottom: 0; width: 100%; height: 100%; background: linear-gradient(90deg, #ff4d6d 0%, #ff85a1 20%, #ffb3c1 50%, #ff85a1 80%, #ff4d6d 100%); border-radius: 0 0 40px 40px; box-shadow: inset 0 15px 15px rgba(255,255,255,0.4), 0 10px 20px rgba(0,0,0,0.3); border: 2px solid #ff0a54; display: flex; justify-content: center; align-items: center; } .tubeLogo { width: 85%; height: auto; border-radius: 10px; display: block; } .stick { position: absolute; width: 24px; height: 260px; background: linear-gradient(to bottom, #fff0f3 0%, #ffccd5 15%, #ff85a1 15%, #ff4d6d 100%); border-radius: 6px 6px 2px 2px; bottom: 100px; z-index: 20; display: flex; justify-content: center; padding-top: 8px; font-size: 16px; font-weight: bold; color: #ff0a54; transition: transform 0.2s; } .s1{left:20px; transform: rotate(-8deg); --r:-8deg; animation-delay: 0.1s;} .s2{left:50px; transform: rotate(-3deg); --r:-3deg; animation-delay: 0.2s;} .s3{left:80px; transform: rotate(2deg); --r:2deg; animation-delay: 0.05s;} .s4{left:110px; transform: rotate(5deg); --r:5deg; animation-delay: 0.15s;} .s5{left:135px; transform: rotate(10deg); --r:10deg; animation-delay: 0.25s;} #mainStick{ left:78px; --r:0deg; animation-delay: 0.12s;} 
  
@keyframes smoothFly {
  0% { 
    transform: translateY(100px) rotate(0deg); 
    opacity: 0;
  }
  20% { 
    opacity: 1; 
    transform: translateY(-200px) rotate(-15deg); /* ‡∏•‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡∏û‡∏∏‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏°‡∏î‡∏∏‡∏• */
  }
  40% { 
    transform: translateY(-280px) rotate(-30deg); /* ‡∏à‡∏∏‡∏î‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î (‡∏ô‡∏¥‡πà‡∏á‡∏ä‡∏±‡πà‡∏ß‡∏Ç‡∏ì‡∏∞) */
  }
  100% { 
    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≤‡∏Å 130px ‡πÄ‡∏õ‡πá‡∏ô 185px ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ô‡∏≤‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏Å‡πâ‡∏ô‡∏Å‡∏£‡∏∞‡∏ö‡∏≠‡∏Å */
    transform: translate(0, 230px) rotate(80deg); 
    opacity: 1;
    z-index: 100;
  }
}

.fly {
  z-index: 100 !important; /* ‡∏î‡∏µ‡∏î‡πÄ‡∏•‡πÄ‡∏¢‡∏≠‡∏£‡πå‡∏°‡∏≤‡∏Ç‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏±‡∏ô‡∏ó‡∏µ */
  animation: smoothFly 1.5s cubic-bezier(0.16, 1, 0.3, 1) forwards !important;
}
  
  button.draw-btn { width: 80%; max-width: 280px; padding: 16px; font-size: 20px; border: none; border-radius: 40px; background: linear-gradient(#ff85a1, #ff4d6d); color: white; font-weight: bold; box-shadow: 0 6px 0 #c9184a, 0 8px 15px rgba(0,0,0,0.3); cursor: pointer; margin-bottom: 5vh; } #overlay{ position:fixed; inset:0; background:rgba(0,0,0,.85); display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:.3s; z-index:999; } #overlay.show{ opacity:1; pointer-events:auto; } .card { width: 300px; height: auto; min-height: 420px; } .cardInner{ width:100%; height:100%; position:relative; transform-style:preserve-3d; transition:.6s; } .card.flip .cardInner{ transform:rotateY(180deg); } .face{ position:absolute; inset:0; backface-visibility:hidden; border-radius:20px; padding:20px; display:flex; flex-direction:column; align-items:center; justify-content:center; } .front{ background:#ff758f; color:white; font-size: 28px; font-weight: bold; border: 4px solid white; height: 420px; } .back{ background:#fff; color:#ff0a54; transform:rotateY(180deg); text-align: center; border: 4px solid #ff85a1; position: relative; height: auto; min-height: 420px;} .capture-fix { transform: none !important; backface-visibility: visible !important; } .closeBtn{ position:absolute; top:10px; right:10px; width:32px; height:32px; border-radius:50%; background:#ff4d6d; color:white; border: none; z-index: 10; } #promoText { margin-top: 10px; font-weight: bold; line-height: 1.4; color: #333; font-size: 13px; white-space: pre-line; } #previewScreen { 
  position: fixed; 
  inset: 0; 
  background: rgba(0,0,0,0.95); 
  z-index: 9999; 
  display: none; 
  flex-direction: column; 
  align-items: center; 
  justify-content: center; 
  padding: 10px; 
} #previewImage { max-width: 240px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.5); } .note-container { display: flex; gap: 5px; margin-top: 5px; width: 100%; } .note-send-btn { background: #4caf50; color: white; border: none; border-radius: 5px; padding: 0 12px; font-size: 12px; cursor: pointer; font-weight: bold; }

@keyframes pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}
.rules-list {
    text-align: left;
    font-size: clamp(14px, 4vw, 16px); /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ */
    color: #333;
    line-height: 1.6;
    margin-bottom: 20px;
    width: 100%;
}
.highlight-red {
    color: red;
    font-weight: bold;
}
 .highlight-line {
    color: #06C755; /* ‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á Line */
    font-weight: bold;
}

/* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏ô‡∏≤‡∏î‡∏Å‡∏•‡πà‡∏≠‡∏á Alert ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤ */
#customAlert > div {
    max-width: 380px !important; /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏à‡∏≤‡∏Å 320px ‡πÄ‡∏õ‡πá‡∏ô 380px */
    width: 95%;
    padding: 25px !important;
}
</style>
</head>

<body>
<div class="bg-container"></div>
<div class="bg-overlay"></div>

<div id="customAlert" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.85); z-index:10000; align-items:center; justify-content:center; padding: 20px;">
  <div style="background:white; padding:30px; border-radius:25px; width:100%; max-width:320px; text-align:center; color:#333; box-shadow: 0 15px 35px rgba(0,0,0,0.3);">
    <div id="alertIcon" style="font-size: 40px; margin-bottom: 15px;">üì¢</div>
    <p id="alertMsg" style="font-size:18px; font-weight:bold; margin-bottom:25px; line-height:1.5; color:#ff0a54;"></p>
    <button onclick="closeAlert()" style="width:100%; padding:14px; background:linear-gradient(#ff85a1, #ff4d6d); color:white; border:none; border-radius:15px; font-weight:bold; font-size:18px; cursor:pointer;">‡∏ï‡∏Å‡∏•‡∏á</button>
  </div>
</div>

<div id="regForm">
  <div class="reg-box">
    <h2>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏•‡∏∏‡πâ‡∏ô‡πÇ‡∏ä‡∏Ñ</h2>
    <input type="text" id="uName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì">
    <input type="tel" id="uTel" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå (10 ‡∏´‡∏•‡∏±‡∏Å)" maxlength="10">
    <button id="regSubmitBtn" onclick="checkAndStart()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ</button>
  </div>
</div>

<h1>üíñ ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏•‡∏∏‡πâ‡∏ô‡πÇ‡∏ä‡∏Ñ‡∏•‡∏∏‡πâ‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• üíñ</h1>
<div id="scene">
  <div id="shakeGroup">
    <div class="stick s1">‚ù§</div><div class="stick s2">‚ù§</div><div class="stick s3">‚ù§</div>
    <div class="stick s4">‚ù§</div><div class="stick s5">‚ù§</div>
    <div class="stick" id="mainStick" style="display: none;">‚ù§</div>
    <div id="tubeWrap"><div id="tube"><img src="https://lh3.googleusercontent.com/d/1EEAbI2a89rG4ii0Um0cfWdXLtcb6I_RU" class="tubeLogo"></div></div>
  </div>
</div>
<button class="draw-btn" id="drawBtn" onclick="draw()" disabled style="opacity:0.5;">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏Å‡πà‡∏≠‡∏ô</button>

<div id="overlay">
  <div class="card" id="card">
    <div class="cardInner" id="cardInner">
      <div class="face front">‡πÄ‡∏õ‡∏¥‡∏î‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏£‡∏±‡∏Å</div>
      <div class="face back" id="captureArea">
        <button class="closeBtn" onclick="closeCard()">√ó</button>
        <img src="https://lh3.googleusercontent.com/d/1EEAbI2a89rG4ii0Um0cfWdXLtcb6I_RU" style="width: 100px; margin-bottom: 5px;">
        <h2 id="cNo" style="margin:0; font-size: 18px;"></h2>
        <p id="cText" style="font-size: 18px; color: #ff4d6d; font-weight: bold; margin: 5px 0;"></p>
        
        <div style="background: #ff0a54; color: white; padding: 4px 12px; border-radius: 20px; font-size: 14px; font-weight: bold; margin: 8px 0; display: inline-block; animation: pulse 1.5s infinite;">
           üì∏ ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡πÅ‡∏Ñ‡∏õ‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÑ‡∏ß‡πâ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
        </div>

        <div style="font-size: 13px; color: #555; background: #fff0f3; padding: 5px 10px; border-radius: 10px; margin: 5px 0; width: 100%;">
          <span id="displayUserInfo"></span>
        </div>
        <hr style="width:100%; border: 0.5px solid #ffe5ec; margin: 5px 0;">
        <p id="promoText" style="margin: 5px 0;"></p>
        <div style="width: 100%; text-align: left; margin-top: 5px;">
          <label style="font-size: 11px; color: #888;">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</label>
          <div class="note-container">
            <input type="text" id="noteInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..." style="flex: 1; border: 1px dashed #ffb3c1; border-radius: 5px; padding: 5px; font-size: 13px; outline: none; color: #333;">
            <button id="btnNote" class="note-send-btn" onclick="saveNoteOnly()">‡∏™‡πà‡∏á</button>
          </div>
        </div>
        <button id="saveBtn" onclick="saveAsImage()" style="margin-top:15px; background:#ff4d6d; color:#fff; border:none; padding:10px; border-radius:25px; font-weight:bold; width: 100%;">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</button>
         <a href="https://line.me/R/oaMessage/@sure141/üéâ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ßüéâ" target="_blank" rel="noopener noreferrer" style="display:block; background:#06c755; color:#fff; text-align:center; padding:14px; border-radius:20px; font-weight:bold; text-decoration:none; margin-top: 10px;">üí¨ ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡πà‡∏≤‡∏ô LINE</a>
      </div>
    </div>
  </div>
</div>

<div id="previewScreen">
  <h3 id="previewHint">‡πÅ‡∏ï‡∏∞‡∏Ñ‡πâ‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏π‡∏õ‡πÄ‡∏û‡∏∑‡πà‡∏≠ '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å'</h3>
  <img id="previewImage" src="">
  <button onclick="closePreview()" style="margin-top:20px; background:#4caf50; border:none; padding:12px 25px; color:white; border-radius:15px; font-weight:bold; cursor: pointer;">‡∏ï‡∏Å‡∏•‡∏á (‡∏î‡∏π‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡∏ï‡πà‡∏≠)</button>
</div>

<button id="prizeListBtn" onclick="togglePrizeSidebar()" style="position: fixed; right: 0; top: 15%; background: #ff4d6d; color: white; border: none; padding: 10px 15px; border-radius: 20px 0 0 20px; z-index: 900; font-weight: bold; box-shadow: -2px 2px 10px rgba(0,0,0,0.2); cursor: pointer;">üéÅ‡∏î‡∏π‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</button>
  
  <button id="termsBtn" onclick="toggleTermsSidebar()" style="position: fixed; left: 0; top: 15%; background: #ff4d6d; color: white; border: none; padding: 10px 15px; border-radius: 0 20px 20px 0; z-index: 900; font-weight: bold; box-shadow: 2px 2px 10px rgba(0,0,0,0.2); cursor: pointer;">‚ö†Ô∏è ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç</button>

<div id="termsSidebar" style="position: fixed; left: -300px; top: 0; width: 280px; height: 100%; background: white; z-index: 1001; transition: 0.4s; box-shadow: 5px 0 20px rgba(0,0,0,0.3); padding: 20px; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 style="color: #ff4d6d; margin: 0;">‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</h3>
        <button onclick="toggleTermsSidebar()" style="background: none; border: none; font-size: 24px; color: #888; cursor: pointer;">√ó</button>
    </div>
    <div style="color: #555; font-size: 14px; line-height: 1.8;">
        <ul style="padding-left: 20px; margin: 0;">
            <li style="margin-bottom: 10px;">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ <b>1 ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå ‡∏ï‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô 1 ‡∏´‡∏•‡∏±‡∏á</b> ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</li>
            <li style="margin-bottom: 10px;">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏±‡∏ö <b>‚Äò‡∏ö‡∏±‡∏ï‡∏£‡∏Å‡∏≥‡∏ô‡∏±‡∏•‚Äô</b> ‡∏≠‡∏∑‡πà‡∏ô‡∏Ç‡∏≠‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó‡∏≠‡∏±‡∏û ‡∏≠‡∏±‡∏û ‡πÑ‡∏î‡πâ</li>
            <li style="margin-bottom: 10px;"><b>‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏≠‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå</b> ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ</li>
            <li style="margin-bottom: 10px;">‡∏´‡∏≤‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤ <b>‚Äò‡∏à‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏∞‡∏Ç‡∏≤‡∏¢‚Äô</b> ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏°‡∏Ü‡∏∞</li>
            <li style="margin-bottom: 10px;">‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó‡∏Ç‡∏≠‡∏™‡∏á‡∏ß‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏à‡πâ‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏£‡∏≤‡∏ö‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤</li>
        </ul>
    </div>
</div>

<div id="prizeSidebar" style="position: fixed; right: -300px; top: 0; width: 280px; height: 100%; background: white; z-index: 1001; transition: 0.4s; box-shadow: -5px 0 20px rgba(0,0,0,0.3); padding: 20px; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h3 style="color: #ff4d6d; margin: 0;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•</h3>
        <button onclick="togglePrizeSidebar()" style="background: none; border: none; font-size: 24px; color: #888; cursor: pointer;">√ó</button>
    </div>
    <div id="prizeItemsContainer">
        </div>
</div>
<div id="sidebarOverlay" onclick="togglePrizeSidebar()" style="position: fixed; inset: 0; background: rgba(0,0,0,0.5); z-index: 1000; display: none;"></div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx5FsRsogKg7wFYj8etWUJsLCOozH-EZgNvB2-UHi-ASAgLoLKlGBnnqCZYVS8NPkOKSQ/exec";
let currentUser = null;
let lastResultText = ""; 
const data = [
  {no:"1", text:"‡∏ä‡∏∏‡∏î‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô", img:"https://lh3.googleusercontent.com/u/0/d/1Ql_aDFN0ntGbDpDW006tgfmQGzYLpAz-"},
  {no:"2", text:"‡πÅ‡∏≠‡∏£‡πå 9,000 BTU", img:"https://lh3.googleusercontent.com/u/0/d/1z8EjO_Rm6nTt2Q4srDrUGJuzANJ557D-"},
  {no:"3", text:"‡πÇ‡∏ã‡∏ü‡∏≤", img:"https://lh3.googleusercontent.com/u/0/d/1NR3c2b_WpWcvRVkFQoktWfoBEElVF_XU"},
  {no:"4", text:"‡πÇ‡∏ï‡πä‡∏∞‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£", img:"https://lh3.googleusercontent.com/u/0/d/1G8-8lCWhCU1Vva7RFa2F1n2lYTdFtKH7"},
  {no:"5", text:"‡∏ú‡πâ‡∏≤‡∏°‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏•‡∏±‡∏á", img:"https://lh3.googleusercontent.com/u/0/d/1Jp8I3vckpuQ3sUuWTTgnNjRc7hQRgs_l"},
  {no:"6", text:"‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î 20,000 ‡∏ö‡∏≤‡∏ó", img:"https://lh3.googleusercontent.com/u/0/d/1Lq6JuSmpXYu0EduuS4-TWYpHYY1yQ63v"},
  {no:"7", text:"‡∏ó‡∏µ‡∏ß‡∏µ 55 ‡∏ô‡∏¥‡πâ‡∏ß", img:"https://lh3.googleusercontent.com/u/0/d/1lQTqCGZxMgDwjnQIlQnVWryzQYNPUJi0"},
  {no:"8", text:"‡∏ï‡∏π‡πâ‡πÄ‡∏¢‡πá‡∏ô 6.4 ‡∏Ñ‡∏¥‡∏ß 2 ‡∏õ‡∏£‡∏∞‡∏ï‡∏π", img:"https://lh3.googleusercontent.com/u/0/d/1jDQviAtim4_D4g6WlfpcZhDjoWhVs5ON"}
];
const slogans = [
  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏£‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏à‡∏±‡∏ö‡∏°‡∏≤‡∏Å! üçÉ ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ó‡∏µ‡πà‡∏•‡∏á‡∏ï‡∏±‡∏ß‡∏™‡∏∏‡∏î‡πÜ\n‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏•‡πà‡∏≠‡∏á‡∏ï‡∏±‡∏ß ‡∏°‡∏µ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏≠‡∏Ñ‡∏≠‡∏¢ üîã\n‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡∏ä‡∏≤‡∏£‡πå‡∏à‡∏û‡∏•‡∏±‡∏á‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏î‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏´‡πâ‡∏û‡∏∏‡πà‡∏á‡∏ó‡∏∞‡∏¢‡∏≤‡∏ô üë®‚Äçüë©‚Äçüëß‚Äçüë¶\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏î‡∏ß‡∏á‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏µ‡∏à‡∏±‡∏ö! ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏±‡∏ö Quality Time ‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏ù‡∏±‡∏ô‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üè†üíñ",
  
  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏Å‡πâ‡∏≠‡∏ô‡πÉ‡∏´‡∏ç‡πà üí∞ ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏î‡πâ‡∏≤‡∏ô‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏Ø\n‡∏´‡∏π‡∏ï‡∏≤‡∏™‡∏ß‡πà‡∏≤‡∏á‡πÑ‡∏™‡∏ß ‡∏ó‡∏±‡∏ô‡πÇ‡∏•‡∏Å ‡∏ó‡∏±‡∏ô‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå ‡∏°‡∏µ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡πÑ‡∏î‡πâ‡∏•‡∏≤‡∏†‡∏•‡∏≠‡∏¢‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡πÉ‡∏´‡∏°‡πà üåé\n‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡∏´‡∏¢‡∏¥‡∏ö‡∏à‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏≠‡∏á ‡∏¢‡∏∑‡πà‡∏ô‡∏Å‡∏π‡πâ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡∏ú‡πà‡∏≤‡∏ô‡∏â‡∏•‡∏∏‡∏¢‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏°‡∏≤‡∏Å üíé‚ú®\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏ß‡∏¢! ‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏≠‡∏á‡πÑ‡∏´‡∏•‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÑ‡∏°‡πà‡∏Ç‡∏≤‡∏î‡∏™‡∏≤‡∏¢ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏•‡∏±‡∏á‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥ üí∏üåà",
  
  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏ß‡∏≤‡∏™‡∏ô‡∏≤‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏µ! ‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏ö‡∏ô‡∏ó‡∏≥‡πÄ‡∏•‡∏®‡∏±‡∏Å‡∏¢‡∏†‡∏≤‡∏û üìç\n‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏ß‡πà‡∏≤‡∏á‡∏à‡πâ‡∏≤ ‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ô‡πÇ‡∏•‡πÄ‡∏Ñ‡∏ä‡∏±‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡πâ‡∏≤‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î üéâ\n‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏û‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á‡πÅ‡∏•‡∏∞‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏î‡∏µ‡πÜ ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏Ç‡∏≤‡∏î‡∏™‡∏≤‡∏¢ ü•∞\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏ó‡∏≥‡πÄ‡∏•‡∏î‡∏µ‡∏°‡∏µ‡∏ä‡∏±‡∏¢‡πÑ‡∏õ‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏£‡∏∂‡πà‡∏á! ‡∏¢‡∏∑‡πà‡∏ô‡∏Å‡∏π‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï üìà‚ú®",
  
  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤ '‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î' ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏™‡∏π‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏á‡∏Ñ‡∏±‡πà‡∏á! üöÄ ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ\n‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏î‡∏µ‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô‡∏Ñ‡∏≤‡∏î‡∏´‡∏°‡∏≤‡∏¢ ‡∏î‡∏ß‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏Ç‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô üåà\n‡∏Å‡∏≤‡∏£‡πÇ‡∏¢‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ô‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏™‡∏π‡πà‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏° ‡∏ï‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÄ‡∏Å‡πà‡∏≤‡πÜ ‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏õ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏î‡∏ß‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï! ‡∏ñ‡∏∂‡∏á‡πÄ‡∏ß‡∏•‡∏≤ Upgrade ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏ê‡∏≤‡∏ô‡∏∞ üéâüè†",

  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏î‡∏ß‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠ '‡∏ô‡∏≤‡∏£‡∏µ‡∏≠‡∏∏‡∏õ‡∏ñ‡∏±‡∏°‡∏†‡πå/‡∏ö‡∏∏‡∏£‡∏∏‡∏©‡∏´‡∏ô‡∏∏‡∏ô‡∏ô‡∏≥' ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏î‡∏ß‡∏á‡πÑ‡∏î‡πâ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏≠‡∏á‡∏ó‡∏≥‡πÄ‡∏•‡∏ó‡∏≠‡∏á üìç\n‡∏´‡∏¢‡∏¥‡∏ö‡∏à‡∏±‡∏ö‡∏≠‡∏™‡∏±‡∏á‡∏´‡∏≤‡∏Ø ‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏ä‡∏≤‡∏ç‡∏â‡∏•‡∏≤‡∏î‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏à‡∏∞‡∏ó‡∏ß‡∏µ‡∏Ñ‡∏π‡∏ì‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß üìà\n‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° ‡∏¢‡∏∑‡πà‡∏ô‡∏Å‡∏π‡πâ‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏¢‡∏≠‡∏î‡∏™‡∏π‡∏á‡∏à‡∏ô‡πÉ‡∏Ñ‡∏£‡πÜ ‡∏Å‡πá‡∏≠‡∏¥‡∏à‡∏â‡∏≤ üèÜ‚ú®\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏£‡∏ß‡∏¢‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ó‡∏≥‡πÄ‡∏•! ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏á‡∏ó‡∏∏‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï üìàü•á",

  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏Ñ‡∏ô‡∏î‡∏ß‡∏á‡πÄ‡∏Æ‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏ö‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥! üèôÔ∏è ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏±‡∏ö‡πÇ‡∏ä‡∏Ñ‡πÉ‡∏´‡∏ç‡πà‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢\n‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡∏î‡∏ß‡∏á‡∏™‡∏¥‡∏ô‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡πà‡∏≤‡∏ô‡∏â‡∏•‡∏∏‡∏¢‡πÅ‡∏ö‡∏ö‡πÑ‡∏£‡πâ‡∏≠‡∏∏‡∏õ‡∏™‡∏£‡∏£‡∏Ñ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ß‡∏Å‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å üíº\n‡∏ó‡∏≥‡πÄ‡∏•‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÅ‡∏ö‡∏ö‡∏Å‡πâ‡∏≤‡∏ß‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î üö¶‚úÖ\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏î‡∏ß‡∏á‡∏£‡∏∏‡πà‡∏á‡∏û‡∏∏‡πà‡∏á‡πÅ‡∏£‡∏á! ‡∏ó‡∏≥‡πÄ‡∏•‡∏î‡∏µ‡∏°‡∏µ‡∏ä‡∏±‡∏¢‡πÑ‡∏õ‡∏Å‡∏ß‡πà‡∏≤‡∏Ñ‡∏£‡∏∂‡πà‡∏á ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏™‡∏ö‡∏≤‡∏¢‡∏ó‡∏∏‡∏Å‡∏°‡∏¥‡∏ï‡∏¥ üö¶üí∞",

  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏û‡∏•‡∏±‡∏á‡∏ö‡∏∏‡∏ç‡∏´‡∏ô‡∏∏‡∏ô‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡πÄ‡∏à‡∏≠‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î üåÖ\n‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏õ‡πÉ‡∏ô‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ô‡∏¥‡πà‡∏á‡πÅ‡∏•‡∏∞‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡πÉ‡∏´‡∏ç‡πà\n‡∏¢‡∏∑‡πà‡∏ô‡∏Å‡∏π‡πâ‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÅ‡∏•‡∏∞‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡πÉ‡∏à ‡∏õ‡∏±‡∏î‡πÄ‡∏õ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÉ‡∏´‡πâ‡∏´‡∏≤‡∏¢‡πÑ‡∏õ üïäÔ∏è\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏î‡∏ß‡∏á‡∏î‡∏µ‡πÑ‡∏£‡πâ‡∏≠‡∏∏‡∏õ‡∏™‡∏£‡∏£‡∏Ñ! ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏£‡πà‡∏°‡πÄ‡∏¢‡πá‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏∏‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏±‡πà‡∏á‡∏¢‡∏∑‡∏ô üè°üíô",

  "üìç ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢ : ‡∏ö‡∏≤‡∏£‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏™‡∏π‡∏á‡∏™‡πà‡∏á ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πà‡∏≤‡∏ß‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï üè∞\n‡∏î‡∏ß‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á‡∏à‡∏ô‡∏™‡∏ñ‡∏≤‡∏ö‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÅ‡∏¢‡πà‡∏á‡∏ï‡∏±‡∏ß ‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏°‡∏≤‡∏Å üëë\n‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏ö‡∏≤‡∏£‡∏°‡∏µ‡πÅ‡∏•‡∏∞‡∏ê‡∏≤‡∏ô‡∏∞‡∏ó‡∏≤‡∏á‡∏™‡∏±‡∏á‡∏Ñ‡∏°‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏î‡∏π‡∏î‡∏µ‡∏°‡∏µ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏¢‡∏¥‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÑ‡∏õ‡∏≠‡∏µ‡∏Å üéâüåü\n‚úÖ ‡∏™‡∏£‡∏∏‡∏õ : ‡∏î‡∏ß‡∏á‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞! ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏™‡∏ô‡∏≤‡∏≠‡∏±‡∏ô‡∏™‡∏π‡∏á‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì üéâüåü"
];

function showAlert(msg, icon = "üì¢") {
  document.getElementById('alertMsg').innerText = msg;
  document.getElementById('alertIcon').innerText = icon;
  document.getElementById('customAlert').style.display = 'flex';
}
function closeAlert() {
  document.getElementById('customAlert').style.display = 'none';
}

async function checkAndStart() {
  const name = document.getElementById('uName').value;
  const tel = document.getElementById('uTel').value;
  if(!name || tel.length < 10) return showAlert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', "‚ö†Ô∏è");
  
  const submitBtn = document.getElementById('regSubmitBtn');
  submitBtn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå...";
  submitBtn.disabled = true;

  try {
    const response = await fetch(`${SCRIPT_URL}?phone=${tel}&action=check`, {
      method: 'GET',
      redirect: 'follow'
    });
    
    if (!response.ok) throw new Error('Network response was not ok');
    const result = await response.json();
    
    if(result.exists) {
      currentUser = { name: result.name || name, tel: tel };
      lastResultText = result.result || "‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏û‡∏¥‡πÄ‡∏®‡∏©"; 

      let foundNo = "1";
      data.forEach(d => { if(lastResultText.includes(d.text)) foundNo = d.no; });
      
      document.getElementById('regForm').style.display = 'none';
      document.getElementById('cNo').innerText = "‡πÉ‡∏ö‡∏ó‡∏µ‡πà " + foundNo;
      document.getElementById('cText').innerText = "‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö: " + lastResultText; 
      document.getElementById('displayUserInfo').innerText = `‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ä‡∏Ñ: ${currentUser.name} (${currentUser.tel})`;
      document.getElementById('promoText').innerText = slogans[0]; 
      
      document.getElementById('overlay').classList.add("show");
      document.getElementById('card').classList.add("flip");
      
      showAlert(`‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß\n‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏∑‡∏≠: ${lastResultText}`, "‚úÖ");
      return;
    }
    
    currentUser = { name, tel };
    document.getElementById('regForm').style.display = 'none';
    const drawBtn = document.getElementById('drawBtn');
    drawBtn.disabled = false;
    drawBtn.style.opacity = '1';
    drawBtn.innerText = '‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ';

  } catch (err) {
    console.error("Detailed Error:", err);
    showAlert("‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á", "‚öôÔ∏è");
    submitBtn.disabled = false;
    submitBtn.innerText = "‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏•‡∏∏‡πâ‡∏ô‡∏£‡∏±‡∏Å";
  }
}

let clickCount = 0;
let tempPicks = [];

async function draw() {
    const drawBtn = document.getElementById('drawBtn');
    drawBtn.disabled = true;
    
    // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÑ‡∏°‡πâ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡∏¢‡πà‡∏≤
    const mainStick = document.getElementById('mainStick');
    mainStick.style.display = "none";
    mainStick.innerText = "";
    mainStick.classList.remove("fly");

    document.getElementById('shakeGroup').classList.add("shake");

    setTimeout(async () => {
        document.getElementById('shakeGroup').classList.remove("shake");
        let currentPick;

        if (clickCount === 0) {
            currentPick = data[Math.floor(Math.random() * data.length)];
            tempPicks.push(currentPick);
            animateStick(currentPick.no);
            clickCount++;
            setTimeout(() => {
                drawBtn.disabled = false;
                drawBtn.innerText = "‡∏î‡∏ß‡∏á‡πÄ‡∏Æ‡∏á‡∏°‡∏≤‡∏Å! ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏ï‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 2 üöÄ";
                showStepAlert(`‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà 1: ${currentPick.text}`, currentPick.img, "‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏ï‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡πÉ‡∏ö‡∏ó‡∏µ‡πà 2");
            }, 1800);
        } else {
            let secondIndex;
            do {
                secondIndex = Math.floor(Math.random() * data.length);
            } while (data[secondIndex].no === tempPicks[0].no);

            currentPick = data[secondIndex];
            tempPicks.push(currentPick);
            animateStick(currentPick.no);

            const combinedText = `${tempPicks[0].text} ‡πÅ‡∏•‡∏∞ ${tempPicks[1].text}`;
            const combinedNo = `${tempPicks[0].no}, ${tempPicks[1].no}`;
            const randomSlogan = slogans[Math.floor(Math.random() * slogans.length)];
            lastResultText = combinedText;

            saveToGoogleSheet(currentUser.name, currentUser.tel, combinedText, "‡πÄ‡∏Ç‡∏¢‡πà‡∏≤ 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏π‡∏õ)");

            setTimeout(() => {
                showStepAlert(`‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏ä‡∏¥‡πâ‡∏ô‡∏ó‡∏µ‡πà 2: ${currentPick.text}`, currentPick.img, "‡∏î‡∏π‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•", () => {
                    document.getElementById('cNo').innerText = "‡πÉ‡∏ö‡∏ó‡∏µ‡πà " + combinedNo;
                    document.getElementById('cText').innerHTML = `
                        <div style="display: flex; gap: 10px; justify-content: center; margin-top: 10px;">
                            <div style="text-align: center; flex:1;">
                                <img src="${tempPicks[0].img}" style="width: 100%; max-width: 90px; height: 90px; object-fit: cover; border-radius: 10px; border: 2px solid #ff4d6d;">
                                <p style="font-size: 10px; margin: 5px 0;">${tempPicks[0].text}</p>
                            </div>
                            <div style="align-self: center; font-size: 20px; font-weight: bold; color:#ff4d6d;">+</div>
                            <div style="text-align: center; flex:1;">
                                <img src="${tempPicks[1].img}" style="width: 100%; max-width: 90px; height: 90px; object-fit: cover; border-radius: 10px; border: 2px solid #ff4d6d;">
                                <p style="font-size: 10px; margin: 5px 0;">${tempPicks[1].text}</p>
                            </div>
                        </div>
                    `;
                    document.getElementById('displayUserInfo').innerText = `‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ä‡∏Ñ: ${currentUser.name} (${currentUser.tel})`;
                    document.getElementById('promoText').innerText = randomSlogan;
                    document.getElementById('overlay').classList.add("show");
                    
                    setTimeout(() => {
                        document.getElementById('card').classList.add("flip");
                        clickCount = 0;
                        tempPicks = [];
                    }, 200);
                });
            }, 1800);
        }
    }, 3000);
}

function showStepAlert(title, imgUrl, btnText, callback = null) {
    const alertMsg = document.getElementById('alertMsg');
    const alertIcon = document.getElementById('alertIcon');
    alertIcon.innerHTML = `<img src="${imgUrl}" style="width:120px; height:120px; border-radius:15px; border: 3px solid #ff4d6d; object-fit:cover;">`;
    alertMsg.innerHTML = `<span style="color:#333;">${title}</span>`;
    const alertBtn = document.querySelector('#customAlert button');
    alertBtn.innerText = btnText;
    const originalClose = window.closeAlert;
    window.closeAlert = function() {
        document.getElementById('customAlert').style.display = 'none';
        window.closeAlert = originalClose;
        if(callback) callback();
    };
    document.getElementById('customAlert').style.display = 'flex';
}

function animateStick(no) {
    const mainStick = document.getElementById('mainStick');
    mainStick.style.display = "none";
    mainStick.innerText = "";
    mainStick.classList.remove("fly");
    
    setTimeout(() => {
        mainStick.innerText = no;
        mainStick.style.display = "flex";
        mainStick.style.left = "78px"; 
        void mainStick.offsetWidth;
        mainStick.classList.add("fly");
    }, 50);
}

function closeCard() {
  const overlay = document.getElementById('overlay');
  overlay.classList.remove("show");
  setTimeout(() => {
    if(!overlay.classList.contains("show")) {
      overlay.style.display = "none";
    }
  }, 300);

  const drawBtn = document.getElementById('drawBtn');
  drawBtn.innerText = '‡∏î‡∏π‡∏ú‡∏•‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á';
  drawBtn.disabled = false;
  drawBtn.style.opacity = '1';
  
  drawBtn.onclick = function() {
    overlay.style.display = "flex";
    setTimeout(() => {
      overlay.classList.add("show");
    }, 10);
  };
}

async function saveNoteOnly() { 
  const noteVal = document.getElementById('noteInput').value; 
  if(!noteVal) return showAlert("‡∏û‡∏¥‡∏°‡∏û‡πå‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡πà‡∏≠‡∏ô", "‚úçÔ∏è"); 
  if(!currentUser) return showAlert("‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ", "‚ùå");
  await saveToGoogleSheet(currentUser.name, currentUser.tel, lastResultText, noteVal); 
  showAlert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß", "‚úÖ"); 
}

async function saveToGoogleSheet(name, phone, result, note) { try { const formData = new URLSearchParams(); formData.append('name', name); formData.append('phone', phone); formData.append('result', result); formData.append('note', note); fetch(SCRIPT_URL, { method: 'POST', mode: 'no-cors', headers: { 'Content-Type': 'application/x-www-form-urlencoded' }, body: formData.toString() }); } catch (err) {} }

function closePreview() { 
  document.getElementById('previewScreen').style.display = 'none'; 
  const overlay = document.getElementById('overlay');
  const card = document.getElementById('card');
  const cardInner = document.getElementById('cardInner');
  const area = document.getElementById('captureArea');
  area.style.transform = ""; 
  cardInner.style.transform = ""; 
  overlay.style.display = "flex";
  overlay.style.opacity = "1";
  overlay.style.pointerEvents = "auto";
  overlay.style.visibility = "visible";
  overlay.classList.add("show");
  card.classList.add("flip"); 
}

function saveAsImage() {
  const area = document.getElementById('captureArea');
  const cardInner = document.getElementById('cardInner');
  const saveBtn = document.getElementById('saveBtn');
  const closeBtn = area.querySelector('.closeBtn');
  const overlay = document.getElementById('overlay');
  const lineBtn = area.querySelector('a[href*="line.me"]'); 
  const noteInput = document.getElementById('noteInput');
  const noteContainer = document.querySelector('.note-container');
  const noteVal = noteInput.value;
  const tempNoteDisplay = document.createElement('p');
  tempNoteDisplay.innerText = noteVal ? noteVal : "-";
  tempNoteDisplay.style.cssText = "font-size: 13px; color: #333; padding: 8px; border: 1px solid #ffb3c1; border-radius: 5px; width: 100%; min-height: 35px; text-align: left; background: #ffffff; margin: 5px 0; word-break: break-all;";
  saveBtn.style.display = 'none';
  if(closeBtn) closeBtn.style.display = 'none';
  if(lineBtn) lineBtn.style.display = 'none';
  noteContainer.style.display = 'none';
  noteContainer.parentNode.insertBefore(tempNoteDisplay, noteContainer.nextSibling);
  cardInner.style.transform = 'none'; 
  area.style.transform = 'none';
  setTimeout(() => {
    html2canvas(area, {
      backgroundColor: "#ffffff",
      scale: 2,
      useCORS: true,
      logging: false,
      allowTaint: true
    }).then(canvas => {
      saveBtn.style.display = 'block';
      if(closeBtn) closeBtn.style.display = 'block';
      if(lineBtn) lineBtn.style.display = 'block';
      tempNoteDisplay.remove();
      noteContainer.style.display = 'flex';
      const imageData = canvas.toDataURL("image/png");
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      if (isMobile) {
        document.getElementById('previewImage').src = imageData;
        document.getElementById('previewScreen').style.display = 'flex';
        overlay.style.opacity = "0";
        overlay.style.pointerEvents = "none";
      } else {
        const link = document.createElement('a');
        link.download = `Siamsee-StartupUp-${currentUser.tel}.png`;
        link.href = imageData;
        link.click();
        showAlert("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß", "üíæ");
        closePreview(); 
      }
    }).catch(err => {
      saveBtn.style.display = 'block';
      if(lineBtn) lineBtn.style.display = 'block';
      if(tempNoteDisplay) tempNoteDisplay.remove();
      noteContainer.style.display = 'flex';
      closePreview();
      showAlert("‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡πÑ‡∏î‡πâ", "‚ùå");
    });
  }, 150);
}

function lockResultDisplay() {
  const overlay = document.getElementById('overlay');
  const card = document.getElementById('card');
  const cardInner = document.getElementById('cardInner');
  overlay.style.display = "flex";
  overlay.classList.add("show");
  overlay.style.opacity = "1";
  overlay.style.pointerEvents = "auto";
  card.classList.add("flip");
  cardInner.style.transform = "";
}

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏¥‡∏î-‡∏õ‡∏¥‡∏î Sidebar ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•
function togglePrizeSidebar() {
    const sidebar = document.getElementById('prizeSidebar');
    const overlay = document.getElementById('sidebarOverlay');
    if (sidebar.style.right === '0px') {
        sidebar.style.right = '-300px';
        overlay.style.display = 'none';
    } else {
        sidebar.style.right = '0px';
        overlay.style.display = 'block';
        renderPrizeList(); // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î
    }
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ data
function renderPrizeList() {
    const container = document.getElementById('prizeItemsContainer');
    container.innerHTML = ''; // ‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤
    
    data.forEach(item => {
        const itemHtml = `
            <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px; padding: 10px; border-bottom: 1px solid #eee;">
                <img src="${item.img}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 8px; border: 1px solid #ffccd5;">
                <div style="flex: 1;">
                    <div style="font-size: 12px; color: #ff4d6d; font-weight: bold;">‡πÉ‡∏ö‡∏ó‡∏µ‡πà ${item.no}</div>
                    <div style="font-size: 14px; color: #333;">${item.text}</div>
                </div>
            </div>
        `;
        container.innerHTML += itemHtml;
    });
}
  function toggleTermsSidebar() {
    const sidebar = document.getElementById('termsSidebar');
    const overlay = document.getElementById('sidebarOverlay');
    if (sidebar.style.left === '0px') {
        sidebar.style.left = '-300px';
        overlay.style.display = 'none';
    } else {
        sidebar.style.left = '0px';
        overlay.style.display = 'block';
    }
}
function showInitialRules() {
    const alertMsg = document.getElementById('alertMsg');
    const alertIcon = document.getElementById('alertIcon');
    
    alertIcon.innerHTML = "üìú";
    alertMsg.innerHTML = `
        <div class="rules-list">
            <b style="font-size: 20px; color: #ff4d6d; display: block; text-align: center; margin-bottom: 15px;">‡∏Å‡∏ï‡∏¥‡∏Å‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°</b>
            1. ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°<br>
            2. ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ <span class="highlight-red">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 2 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span> (‡∏°‡∏µ 2 ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•)<br>
            3. ‡πÅ‡∏Ñ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÉ‡∏ö‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•<br>
            4. ‡∏Å‡∏î‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏ó‡∏µ‡πà <span class="highlight-line">LINE
        </div>
    `;
    
    const alertBtn = document.querySelector('#customAlert button');
    alertBtn.innerText = "‡∏ï‡∏Å‡∏•‡∏á ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô";
    document.getElementById('customAlert').style.display = 'flex';
}

// ‡∏™‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
window.addEventListener('load', showInitialRules);
function handleLineLink() {
    // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    
    if (isMobile) {
        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠: ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
        window.location.href = "https://line.me/R/oaMessage/@sure141/üéâ‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ßüéâ";
    } else {
        // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå: ‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ ID LINE / QR Code (‡∏´‡∏ô‡πâ‡∏≤ Add Friend)
        // ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏∑‡∏≠ https://line.me/ti/p/@sure141
        window.open("https://line.me/ti/p/@sure141", "_blank");
    }
}
(function() {
    function fixLineLinkForPC() {
      // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≠‡∏°‡∏û‡∏¥‡∏ß‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Mobile)
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      
      if (!isMobile) {
        // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏•‡∏¥‡∏á‡∏Å‡πå Line
        const lineBtn = document.querySelector('a[href*="line.me/R/oaMessage"]');
        if (lineBtn) {
          // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô/‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏Ç‡∏≠‡∏á @sure141 ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
          lineBtn.href = "https://line.me/ti/p/@sure141";
        }
      }
    }
    // ‡∏£‡∏±‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
    fixLineLinkForPC();
    // ‡∏£‡∏±‡∏ô‡∏ã‡πâ‡∏≥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡∏ã‡∏µ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ñ‡∏π‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡πâ‡∏ß‡∏¢
    document.addEventListener('click', function(e) {
      if (e.target.id === 'drawBtn' || e.target.id === 'regSubmitBtn') {
        setTimeout(fixLineLinkForPC, 1000);
      }
    });
  })();
</script>
</body>
</html>
